<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EasyBook È†êÁ¥ÑÁ≥ªÁµ± (È†êË¶ΩÁâà)</title>
    
    <!-- 1. ÂºïÂÖ• Tailwind CSS (ÁæéÂåñÊ®£Âºè) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. ÂºïÂÖ• React Âíå ReactDOM (Ê†∏ÂøÉÂºïÊìé) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- 3. ÂºïÂÖ• Babel (ËÆìÁÄèË¶ΩÂô®Áúã‰∏çÊáÇÁöÑ JSX ËΩâÊàêÁúãÂæóÊáÇÁöÑ JS) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 4. ÂºïÂÖ•ÂúñÊ®ôÂ∫´ (Lucide Icons) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 3px; }
        @keyframes fade-in-up {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up { animation: fade-in-up 0.5s ease-out forwards; }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <!-- ÈÄôÊòØ React Á®ãÂºèÊéõËºâÁöÑÊ†πÁõÆÈåÑ -->
    <div id="root"></div>

    <!-- ÈÄôË£°ÊòØ React Á®ãÂºèÁ¢ºÈÇèËºØ -->
    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Ê®°Êì¨Ë≥áÊñôÂ∫´ ---
        const STORE_INFO = {
            name: "‚ú® EasyBook Â∑•‰ΩúÂÆ§",
            address: "Âè∞ÂåóÂ∏ÇÂ§ßÂÆâÂçÄÂÖâÂæ©ÂçóË∑Ø 100 Ëôü",
            description: "Â∞àÊ≥®ÊñºÊÇ®ÁöÑËá™ÁÑ∂ÁæéÔºåÊèê‰æõÈ†ÇÁ¥öË≠∑ËÜöËàáÁæéÁî≤È´îÈ©ó„ÄÇ",
            lineUrl: "https://line.me/ti/p/@example",
            rating: 4.9
        };

        const SERVICES = [
            { id: 's1', name: 'Ê∑±Â±§‰øùÊøïË≠∑ÁêÜ', duration: 60, price: 1500, description: 'Âê´Ê¥óÂç∏„ÄÅËáâÈÉ®ÊåâÊë©ËàáÁéªÂ∞øÈÖ∏Â∞éÂÖ•„ÄÇ', tag: 'ÁÜ±ÈñÄ' },
            { id: 's2', name: 'ÂÖâÁôÇÊåáÁî≤Ë®≠Ë®à', duration: 90, price: 1800, description: 'ÂåÖÂê´‰øÆÂûã„ÄÅÁîòÁöÆËôïÁêÜÔºåÂèØÈÅ∏ÂñÆËâ≤„ÄÇ', tag: 'Êé®Ëñ¶' },
            { id: 's3', name: 'ÂÖ®Ë∫´Á≤æÊ≤πËàíÂ£ì', duration: 60, price: 2000, description: '‰ΩøÁî®È†ÇÁ¥öËñ∞Ë°£ËçâÁ≤æÊ≤πÔºåÈáãÊîæÂ£ìÂäõ„ÄÇ', tag: 'ÊîæÈ¨Ü' },
        ];

        const STAFF = [
            { id: 'st1', name: 'Alice ËÄÅÂ∏´', title: 'Â∫óÈï∑', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Alice', rating: 5.0 },
            { id: 'st2', name: 'Bob Ë®≠Ë®àÂ∏´', title: 'Ë≥áÊ∑±', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Bob', rating: 4.8 },
            { id: 'st3', name: 'Carol ÂØ¶ÁøíÂ∏´', title: 'Âä©ÁêÜ', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Carol', rating: 4.7 },
        ];

        const TIME_SLOTS = ['10:00', '11:00', '13:00', '14:30', '16:00', '17:30', '19:00'];

        // --- ‰∏ªÁ®ãÂºèÂÖÉ‰ª∂ ---
        function BookingApp() {
            const [step, setStep] = useState(1);
            const [selectedService, setSelectedService] = useState(null);
            const [selectedStaff, setSelectedStaff] = useState(null);
            const [selectedTime, setSelectedTime] = useState(null);
            const [customerInfo, setCustomerInfo] = useState({ name: '', phone: '' });
            const [error, setError] = useState('');

            // ËÆì Lucide ÂúñÊ®ôÂú® React Ê∏≤ÊüìÂæåÂàùÂßãÂåñ
            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            });

            const handleServiceSelect = (service) => { setSelectedService(service); setStep(2); };
            const handleStaffSelect = (staff) => { setSelectedStaff(staff); setStep(3); };
            const handleTimeSelect = (time) => { setSelectedTime(time); setStep(4); };

            const handleConfirm = () => {
                const phoneRegex = /^09\d{8}$/;
                if (!phoneRegex.test(customerInfo.phone)) {
                    setError('Ë´ãËº∏ÂÖ•Ê≠£Á¢∫ÁöÑ 09 ÈñãÈ†≠ 10 Á¢ºÊâãÊ©üËôüÁ¢º');
                    return;
                }
                setStep(5);
            };

            // ÂúñÊ®ôÁµÑ‰ª∂ (Âõ†ÁÇ∫ CDN ‰∏çËÉΩÁõ¥Êé• import Lucide ReactÔºåÊàëÂÄëÁî® data-lucide Â±¨ÊÄß)
            const Icon = ({ name, size = 20, className = "" }) => (
                <i data-lucide={name} width={size} height={size} className={className}></i>
            );

            return (
                <div className="min-h-screen bg-gradient-to-br from-gray-50 to-green-50 flex justify-center p-4">
                    <div className="w-full max-w-md bg-white rounded-[32px] shadow-2xl flex flex-col overflow-hidden relative border border-white/50 h-[85vh]">
                        
                        {/* È†ÇÈÉ®Â∞éË¶Ω */}
                        <header className="bg-white/80 backdrop-blur-md p-4 border-b border-gray-100 flex items-center sticky top-0 z-20">
                            {step > 1 && step < 5 && (
                                <button onClick={() => setStep(step - 1)} className="mr-2 p-2 rounded-full hover:bg-gray-100 transition-colors">
                                    <Icon name="chevron-left" />
                                </button>
                            )}
                            <div className="flex-1 text-center font-bold text-slate-700">
                                {step === 1 ? "È†êÁ¥ÑÊúçÂãô" : step === 2 ? "ÈÅ∏Êìá‰∫∫Âì°" : step === 3 ? "ÈÅ∏ÊìáÊôÇÊÆµ" : step === 4 ? "Á¢∫Ë™çË≥áÊñô" : "È†êÁ¥ÑÂÆåÊàê"}
                            </div>
                            {step > 1 && step < 5 && <div className="w-10"></div>}
                        </header>

                        {/* ÈÄ≤Â∫¶Ê¢ù */}
                        {step < 5 && (
                            <div className="w-full bg-gray-100 h-1">
                                <div className="bg-emerald-500 h-1 transition-all duration-500" style={{ width: `${(step / 4) * 100}%` }}></div>
                            </div>
                        )}

                        <main className="flex-1 p-5 overflow-y-auto custom-scrollbar">
                            
                            {/* STEP 1: ÊúçÂãô */}
                            {step === 1 && (
                                <div className="space-y-6 animate-fade-in-up">
                                    <div className="text-center py-4">
                                        <h1 className="text-2xl font-bold text-slate-800">{STORE_INFO.name}</h1>
                                        <p className="text-sm text-slate-500 mt-2">{STORE_INFO.description}</p>
                                    </div>
                                    <div className="space-y-4">
                                        {SERVICES.map(service => (
                                            <div key={service.id} onClick={() => handleServiceSelect(service)} 
                                                className="bg-white border border-gray-100 rounded-2xl p-5 hover:border-emerald-400 hover:shadow-lg cursor-pointer transition-all active:scale-95">
                                                <div className="flex justify-between">
                                                    <div>
                                                        <h3 className="font-bold text-lg text-slate-800">{service.name}</h3>
                                                        <p className="text-xs text-slate-400 mt-1">{service.description}</p>
                                                        <div className="flex items-center text-xs text-slate-400 mt-2 font-medium">
                                                            <span className="mr-1">üïí</span> {service.duration} ÂàÜÈêò
                                                        </div>
                                                    </div>
                                                    <span className="text-lg font-bold text-emerald-600">${service.price}</span>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {/* STEP 2: ‰∫∫Âì° */}
                            {step === 2 && (
                                <div className="space-y-4 animate-fade-in-up">
                                    <div className="bg-emerald-50 p-3 rounded-xl text-sm text-emerald-800 border border-emerald-100 flex justify-between">
                                        <span>Â∑≤ÈÅ∏Ôºö{selectedService.name}</span>
                                        <span className="font-bold">${selectedService.price}</span>
                                    </div>
                                    <div onClick={() => handleStaffSelect({ id: 'any', name: '‰∏çÊåáÂÆö‰∫∫Âì°', avatar: '', isAny: true })}
                                        className="border border-dashed border-slate-300 rounded-2xl p-4 flex items-center hover:bg-emerald-50 cursor-pointer">
                                        <div className="w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center mr-4 text-xl">‚ö°Ô∏è</div>
                                        <div>
                                            <h3 className="font-bold">‰∏çÊåáÂÆö (ÊúÄÂø´ÂèØÁ¥Ñ)</h3>
                                            <p className="text-xs text-slate-400">Á≥ªÁµ±Ëá™ÂãïÂÆâÊéí</p>
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-2 gap-3">
                                        {STAFF.map(staff => (
                                            <div key={staff.id} onClick={() => handleStaffSelect(staff)}
                                                className="border border-gray-100 rounded-2xl p-4 flex flex-col items-center hover:border-emerald-500 hover:shadow-md cursor-pointer bg-white">
                                                <img src={staff.avatar} className="w-16 h-16 rounded-full mb-2 bg-gray-50" />
                                                <h3 className="font-bold text-slate-700">{staff.name}</h3>
                                                <span className="text-xs bg-slate-100 text-slate-500 px-2 py-1 rounded mt-1">{staff.title}</span>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {/* STEP 3: ÊôÇÈñì */}
                            {step === 3 && (
                                <div className="animate-fade-in-up">
                                    <div className="flex space-x-2 mb-6 text-xs">
                                        <span className="bg-emerald-100 text-emerald-700 px-3 py-1 rounded-full">{selectedService.name}</span>
                                        <span className="bg-slate-100 text-slate-600 px-3 py-1 rounded-full">{selectedStaff.name}</span>
                                    </div>
                                    <h3 className="font-bold mb-4 flex items-center"><Icon name="calendar" size={16} className="mr-2"/> ÈÅ∏Êìá‰ªäÊó•ÊôÇÊÆµ</h3>
                                    <div className="grid grid-cols-3 gap-3">
                                        {TIME_SLOTS.map(time => (
                                            <button key={time} onClick={() => handleTimeSelect(time)}
                                                className="py-3 border rounded-xl hover:bg-emerald-600 hover:text-white hover:border-emerald-600 transition font-medium text-slate-600 active:scale-95">
                                                {time}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {/* STEP 4: Ë≥áÊñô */}
                            {step === 4 && (
                                <div className="space-y-6 animate-fade-in-up">
                                    <div className="bg-white border border-gray-100 shadow-lg rounded-2xl overflow-hidden">
                                        <div className="bg-emerald-500 p-3 text-white font-bold text-center">È†êÁ¥ÑÁ¢∫Ë™ç</div>
                                        <div className="p-5 space-y-3 text-sm">
                                            <div className="flex justify-between"><span className="text-slate-400">È†ÖÁõÆ</span><span className="font-medium">{selectedService.name}</span></div>
                                            <div className="flex justify-between"><span className="text-slate-400">‰∫∫Âì°</span><span className="font-medium">{selectedStaff.name}</span></div>
                                            <div className="flex justify-between"><span className="text-slate-400">ÊôÇÈñì</span><span className="font-bold text-emerald-600">‰ªäÊó• {selectedTime}</span></div>
                                            <div className="pt-3 border-t flex justify-between items-center">
                                                <span className="text-slate-400">Ë≤ªÁî®</span>
                                                <span className="text-xl font-bold text-slate-800">${selectedService.price}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-xs font-bold text-slate-400 mb-1 ml-1">ÂßìÂêç</label>
                                            <input type="text" placeholder="ÊÇ®ÁöÑÁ®±Âëº" value={customerInfo.name} onChange={(e) => setCustomerInfo({...customerInfo, name: e.target.value})}
                                                className="w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none"/>
                                        </div>
                                        <div>
                                            <label className="block text-xs font-bold text-slate-400 mb-1 ml-1">ÊâãÊ©ü</label>
                                            <input type="tel" placeholder="09xx-xxx-xxx" value={customerInfo.phone} 
                                                onChange={(e) => { setCustomerInfo({...customerInfo, phone: e.target.value}); setError(''); }}
                                                className={`w-full p-3 bg-gray-50 border rounded-xl focus:ring-2 outline-none ${error ? 'border-red-500 bg-red-50' : 'border-gray-200 focus:ring-emerald-500'}`}/>
                                            {error && <p className="text-red-500 text-xs mt-1 ml-1">{error}</p>}
                                        </div>
                                    </div>
                                    <button onClick={handleConfirm} className="w-full bg-slate-800 text-white py-4 rounded-xl font-bold text-lg hover:bg-slate-900 shadow-xl active:scale-95 transition-all">Á¢∫Ë™çÈ†êÁ¥Ñ</button>
                                </div>
                            )}

                            {/* STEP 5: ÂÆåÊàê */}
                            {step === 5 && (
                                <div className="text-center pt-8 animate-fade-in-up">
                                    <div className="w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <Icon name="check" size={40} className="text-emerald-600" />
                                    </div>
                                    <h2 className="text-2xl font-bold text-slate-800 mb-2">È†êÁ¥ÑÊàêÂäüÔºÅ</h2>
                                    <p className="text-slate-500 text-sm mb-8">ÊÑüË¨ùÊÇ®ÁöÑÈ†êÁ¥ÑÔºåÊúüÂæÖËàáÊÇ®Áõ∏Ë¶ã„ÄÇ</p>

                                    <div className="bg-slate-50 p-6 rounded-2xl text-left mb-6 border border-gray-200">
                                        <div className="flex items-center mb-4">
                                            <Icon name="calendar" className="mr-3 text-emerald-500"/>
                                            <div>
                                                <h3 className="font-bold text-slate-800">12Êúà 25Êó• (‰ªäÊó•)</h3>
                                                <p className="text-emerald-600 font-bold">{selectedTime}</p>
                                            </div>
                                        </div>
                                        <div className="text-sm text-slate-500 space-y-1 pl-9 border-l-2 border-gray-200 ml-2">
                                            <p>ÊúçÂãôÔºö{selectedService.name}</p>
                                            <p>‰∫∫Âì°Ôºö{selectedStaff.name}</p>
                                            <p>ÈõªË©±Ôºö{customerInfo.phone}</p>
                                        </div>
                                    </div>

                                    <a href={STORE_INFO.lineUrl} target="_blank" className="block w-full bg-[#06c755] text-white py-3 rounded-xl font-bold hover:bg-[#05b34c] transition flex items-center justify-center shadow-lg shadow-green-500/20">
                                        <span className="mr-2 text-xl">üí¨</span> Âä†ÂÖ• LINE Êé•Êî∂ÊèêÈÜí
                                    </a>
                                    <button onClick={() => window.location.reload()} className="block w-full text-slate-400 py-3 text-sm mt-2">ËøîÂõûÈ¶ñÈ†Å</button>
                                </div>
                            )}
                        </main>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<BookingApp />);
    </script>
</body>
</html>
